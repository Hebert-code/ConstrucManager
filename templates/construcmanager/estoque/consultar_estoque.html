{% extends 'construcmanager/base.html' %}
{% load static %}
{% block content %}
<div class="container">
  <h2>Consulta de Estoque</h2>
  <a href="{% url 'alertas_estoque' %}" class="btn btn-warning mb-3">Ver Alertas de Estoque</a>
  <table class="table table-striped">
      <thead>
          <tr>
              <th>Nome do Produto</th>
              <th>Estoque Atual</th>
              <th>Ponto de Reposição</th>
              <th>Ações</th>
          </tr>
      </thead>
      <tbody>
          {% for produto in produtos %}
          <tr>
              <td>{{ produto.produto_nome }}</td>
              <td>{{ produto.produto_quantidade_em_estoque }}</td>
              <td>{{ produto.produto_ponto_reposicao }}</td>
              <td>
                  <a href="{% url 'atualizar_estoque' produto.id %}" class="btn btn-primary btn-sm">Atualizar</a>
              </td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="4">Nenhum produto encontrado.</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>

  <!-- Paginação -->
  <nav aria-label="Navegação de página">
    <ul class="pagination justify-content-center">
      {% if produtos.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1">&laquo;&laquo;</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ produtos.previous_page_number }}">&laquo;</a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <span class="page-link">&laquo;&laquo;</span>
      </li>
      <li class="page-item disabled">
        <span class="page-link">&laquo;</span>
      </li>
      {% endif %}

      <li class="page-item disabled">
        <span class="page-link">Página {{ produtos.number }} de {{ produtos.paginator.num_pages }}</span>
      </li>

      {% if produtos.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ produtos.next_page_number }}">&raquo;</a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ produtos.paginator.num_pages }}">&raquo;&raquo;</a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <span class="page-link">&raquo;</span>
      </li>
      <li class="page-item disabled">
        <span class="page-link">&raquo;&raquo;</span>
      </li>
      {% endif %}
    </ul>
  </nav>
</div>
{% endblock %}
